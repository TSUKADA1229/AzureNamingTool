
# 例：ジョブの冒頭で OIDC 権限を付与
permissions:
  contents: read
  packages: write
  id-token: write

steps:
  - uses: actions/checkout@v3

  - name: Install Cosign
    uses: sigstore/cosign-installer@v4
    with:
      cosign-release: 'v3.0.2'

  - name: Login to GHCR
    uses: docker/login-action@v3
    with:
      registry: ghcr.io
      username: ${{ github.actor }}
      password: ${{ secrets.GITHUB_TOKEN }}

  - name: Sign image digest (non-interactive)
    env:
      COSIGN_YES: "true"  # ← 対話プロンプトを自動承認（--yesでも可）
       run: |
      DIGEST="sha256:83be7ac7698c5bb7e068e1b4dd895813f53f1de2100fb1a164007d0e86ced38b"
